parameters:
- name: platformName
  type: string

steps:
  - task: ExpertaPreview.pvAzDNSZone.custom-build-release-task.ARecordManager@6
    displayName: 'Add A Dns record'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      resourceGroupName: expertadomain
      domainName: experta.ca
      aName: ${{ parameters.platformName }}test
      ipAddress: 127.0.0.0
  - task: ExpertaPreview.pvAzDNSZone.custom-build-release-task.ARecordManager@6
    displayName: 'Update A Dns record'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      resourceGroupName: expertadomain
      domainName: experta.ca
      aName: linuxtest
      ipAddress: 127.0.0.1
  - task: ExpertaPreview.pvAzDNSZone.custom-build-release-task.ARecordManager@6
    displayName: 'Remove A Dns record'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      actionType: remove
      resourceGroupName: expertadomain
      domainName: experta.ca
      aName: linuxtest
  - task: ExpertaPreview.pvAzDNSZone.cnameRecord-task.CNAMERecordManager@6
    displayName: 'Add CNAME Dns record'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      actionType: createUpdate
      resourceGroupName: expertadomain
      domainName: experta.ca
      cname: linuxtest
      alias: experta.ca
  - task: ExpertaPreview.pvAzDNSZone.cnameRecord-task.CNAMERecordManager@6
    displayName: 'Update CNAME Dns record'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      actionType: createUpdate
      resourceGroupName: expertadomain
      domainName: experta.ca
      cname: linuxtest
      alias: expertasolutions.com
  - task: ExpertaPreview.pvAzDNSZone.cnameRecord-task.CNAMERecordManager@6
    displayName: 'Remove CNAME Dns record'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      actionType: remove
      resourceGroupName: expertadomain
      domainName: experta.ca
      cname: linuxtest
  - task: ExpertaPreview.pvAzDNSZone.txtRecord-task.TXTRecordManager@6
    displayName: 'Create ''txtLinuxTest'' TXT DNS record on experta.ca'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      resourceGroupName: expertadomain
      domainName: experta.ca
      txt: txtLinuxTest
      value: |
        invalid1
        invalid2
  - task: ExpertaPreview.pvAzDNSZone.txtRecord-task.TXTRecordManager@6
    displayName: 'Update ''txtLinuxTest'' TXT DNS record on experta.ca'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      resourceGroupName: expertadomain
      domainName: experta.ca
      txt: txtLinuxTest
      value: |
        invalidupdate1
        invalidupdate2
  - task: ExpertaPreview.pvAzDNSZone.txtRecord-task.TXTRecordManager@6
    displayName: 'Remove ''txtLinuxTest'' TXT DNS record on experta.ca'
    inputs:
      azureSubscriptionEndpoint: 'Solutions Experta Internal (Pay-as-You-Go) (c613aec0-2955-4f3a-8682-c9fc4aa4a998)'
      actionType: remove
      resourceGroupName: expertadomain
      domainName: experta.ca
      txt: txtLinuxTest